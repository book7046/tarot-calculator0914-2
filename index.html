<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f172a">
  <meta name="apple-mobile-web-app-capable" content="yes">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light">
    <meta name="theme-color" content="#1e3c72">
    <title>å¸ƒå…‹å¡”ç¾…ç‰Œå åœ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .card-back {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 3px solid #ffd700;
        }
        
        .card-front {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: 3px solid #ffd700;
        }
        
        .card-flip {
            transform: rotateY(180deg);
            transition: transform 0.6s;
        }
        
        .card-reversed {
            transform: rotate(180deg);
        }
        
        .mystical-bg {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }
        
        .glow {
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .fan-container {
            position: relative;
            width: 100%;
            height: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .fan-card {
            position: absolute;
            width: 60px;
            height: 90px;
            transition: all 0.3s ease;
            transform-origin: bottom center;
            cursor: pointer;
        }
        
        .fan-card:hover {
            transform: translateY(-20px) scale(1.1);
            z-index: 100;
        }
        
        .fan-card.selected {
            opacity: 0.3;
            pointer-events: none;
        }
    
/* Layer surfaces */
  --surface-10: rgba(255,255,255,0.10);
  --surface-20: rgba(255,255,255,0.20);

  /* Text tokens */
  --text-base: #ffffff;
  --text-muted: #d1d5db;      /* Tailwind gray-300 */
  --text-accent: #fde047;     /* Tailwind yellow-300 */
  --text-secondary: #bfdbfe;  /* Tailwind blue-200 */

  /* Border tokens */
  --border-accent-30: rgba(253,224,71,0.30);
  --border-accent-50: rgba(253,224,71,0.50);
}

/* Force light color scheme on all devices */
html { color-scheme: light; -webkit-tap-highlight-color: transparent; }
@media (prefers-color-scheme: dark) { html { color-scheme: light; } }

/* Map common utility classes to tokens for maintainability */
.text-white { color: var(--text-base) !important; }
.text-yellow-300 { color: var(--text-accent) !important; }
.text-blue-200 { color: var(--text-secondary) !important; }
.text-gray-300 { color: var(--text-muted) !important; }

.bg-white\/10 { background-color: var(--surface-10) !important; }
.bg-white\/20 { background-color: var(--surface-20) !important; }
.hover\:bg-white\/30:hover { background-color: rgba(255,255,255,0.30) !important; }

.border-yellow-300\/30 { border-color: var(--border-accent-30) !important; }
.border-yellow-300\/50 { border-color: var(--border-accent-50) !important; }
.border-yellow-400\/30 { border-color: var(--border-accent-30) !important; }

/* Use theme tokens in custom site classes to ensure parity across devices */
.mystical-bg { background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%); }
.card-back { background: linear-gradient(135deg, var(--card-back-start) 0%, var(--card-back-end) 100%); border: 3px solid var(--gold); }
.card-front { background: linear-gradient(135deg, var(--card-front-start) 0%, var(--card-front-end) 100%); border: 3px solid var(--gold); }
.glow { box-shadow: 0 0 20px rgba(255, 215, 0, 0.50); }

    

/* Inputs & textareas: use the same text color as desktop and don't override background */
input, textarea {
  color: var(--text-base) !important;              /* white */
  -webkit-text-fill-color: var(--text-base) !important; /* iOS Safari */
  caret-color: var(--text-accent) !important;      /* cursor color for visibility */
  padding: 0.5rem;
  border-radius: 0.375rem;
  max-width: 100%;
  font-size: 16px; /* prevent iOS zoom and improve legibility */
}

/* Placeholder colors */
input::placeholder, textarea::placeholder {
  color: var(--text-secondary) !important;
  opacity: 1;
}
/* iOS placeholder */
input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {
  color: var(--text-secondary) !important;
}

/* Autofill overrides (iOS/Android) so text stays white */
input:-webkit-autofill,
textarea:-webkit-autofill {
  -webkit-text-fill-color: var(--text-base) !important;
  transition: background-color 99999s ease-in-out 0s;
}

/* Avoid horizontal overflow on mobile */
html, body {
  overflow-x: hidden;
}

/* Ensure spread selection & dialogs share desktop gradient */
#spreadSection,
.dialog,
.modal {
  background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%) !important;
  color: var(--text-base) !important;
}

/* If the textarea needs explicit color (id selector wins) */
#questionInput {
  color: var(--text-base) !important;
  -webkit-text-fill-color: var(--text-base) !important;
}

/* Prefer light, don't let mobile auto-tint */
html { color-scheme: light; }

/* iOS Safari specific feature query */
@supports (-webkit-touch-callout: none) {
  /* Glass panels that used to be bg-white/20 become too bright on mobile.
     Pull them back to ~12% opacity to match desktop look. */
  .bg-white\/20,
  .bg-white\/30,
  textarea.bg-white\/20,
  input.bg-white\/20,
  .spread-option {
    background-color: rgba(255,255,255,0.12) !important;
    -webkit-backdrop-filter: saturate(180%) blur(8px);
            backdrop-filter: saturate(180%) blur(8px);
    color: var(--text-base) !important;
  }

  /* Ensure text is visible inside inputs on iOS Safari */
  textarea, input {
    color: var(--text-base) !important;
    -webkit-text-fill-color: var(--text-base) !important;
    caret-color: var(--text-accent) !important;
    font-size: 16px; /* avoid zoom */
  }
  textarea::placeholder, input::placeholder {
    color: var(--text-secondary) !important;
    opacity: 1;
  }
}

/* Force spread-selection cards and dialogs to use the same dark mystical look */
.spread-option,
.dialog,
.modal {
  background: rgba(255,255,255,0.12) !important;
  color: var(--text-base) !important;
  border-color: var(--border-accent-30) !important;
}

/* Some result/support blocks used warm amber/yellow gradient on mobile â€” normalize to desktop theme */
[class*="from-amber-900/20"][class*="to-yellow-900/20"],
[class*="from-yellow-900/20"][class*="to-amber-900/20"] {
  background-image: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%) !important;
}

/* Fix horizontal overflow */
html, body { overflow-x: hidden; }

</style>
  <link rel="stylesheet" href="theme.css">
  <link rel="stylesheet" href="theme_force.css">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="assets/icons/icon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="assets/icons/icon-180x180.png">
<link rel="mask-icon" href="assets/icons/safari-pinned-tab.svg" color="#0f172a">
<link rel="shortcut icon" href="favicon.ico">
<meta name="apple-mobile-web-app-title" content="éˆæ•¸è¨ˆç®—å™¨">
<meta name="application-name" content="éˆæ•¸è¨ˆç®—å™¨">
<link rel="preconnect" href="https://cdn.tailwindcss.com">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body class="mystical-bg min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        <!-- æ¨™é¡Œ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-2 text-yellow-300">ğŸ”® å¸ƒå…‹å¡”ç¾…</h1>
            <p class="text-lg text-blue-200">å‰ç‰¹å¡”ç¾…ç‰Œå åœç³»çµ±</p>
        </div>

        <!-- å•é¡Œè¼¸å…¥å€ -->
        <div id="questionSection" class="max-w-2xl mx-auto mb-8 bg-white/10 backdrop-blur-sm rounded-lg p-6">
            <h2 class="text-2xl font-semibold mb-4 text-center">âœ¨ è«‹è¼¸å…¥ä½ çš„å•é¡Œ-ä¸¦åœ¨å¿ƒä¸­é»˜å¿µä¸‰æ¬¡</h2>
            <textarea 
                id="questionInput" 
                placeholder="åœ¨æ­¤è¼¸å…¥ä½ æƒ³è¦å åœçš„å•é¡Œ..."
                class="w-full h-32 p-4 rounded-lg bg-white/20 backdrop-blur-sm border border-yellow-300/50 text-white placeholder-blue-200 resize-none focus:outline-none focus:ring-2 focus:ring-yellow-300"
            ></textarea>
            <button 
                id="nextBtn"
                class="w-full mt-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 glow"
            >
                ä¸‹ä¸€æ­¥ - é¸æ“‡æ‰€éœ€çš„ç‰Œé™£
            </button>
        </div>

        <!-- ç‰Œé™£é¸æ“‡å€ -->
        <div id="spreadSection" class="max-w-4xl mx-auto mb-8 bg-white/10 backdrop-blur-sm rounded-lg p-6 hidden">
            <h2 class="text-2xl font-semibold mb-6 text-center">ğŸƒ é¸æ“‡ç‰Œé™£</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- æ™‚é–“ä¹‹æµ -->
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="timeflow">
                    <h3 class="text-lg font-semibold mb-2">æ™‚é–“ä¹‹æµ</h3>
                    <p class="text-sm text-blue-200 mb-3">éå»ã€ç¾åœ¨ã€æœªä¾†</p>
                    <div class="flex justify-center space-x-2">
                        <div class="w-8 h-12 bg-gradient-to-b from-purple-400 to-purple-600 rounded border border-yellow-300"></div>
                        <div class="w-8 h-12 bg-gradient-to-b from-purple-400 to-purple-600 rounded border border-yellow-300"></div>
                        <div class="w-8 h-12 bg-gradient-to-b from-purple-400 to-purple-600 rounded border border-yellow-300"></div>
                    </div>
                </div>

                <!-- å¤§è¡›ä¹‹æ˜Ÿç‰Œé™£ -->
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="davidstar">
                    <h3 class="text-lg font-semibold mb-2">å¤§è¡›ä¹‹æ˜Ÿç‰Œé™£</h3>
                    <p class="text-sm text-blue-200 mb-3">å…¨é¢åˆ†æå•é¡Œ</p>
                    <div class="flex justify-center">
                        <div class="relative w-16 h-16">
                            <!-- ä¸Šä¸‰è§’ -->
                            <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <div class="absolute top-3 left-1 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <div class="absolute top-3 right-1 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <!-- ä¸‹ä¸‰è§’ -->
                            <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <div class="absolute bottom-3 left-1 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <div class="absolute bottom-3 right-1 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                        </div>
                    </div>
                </div>

                <!-- Uå‹ç‰Œé™£ -->
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="ushape">
                    <h3 class="text-lg font-semibold mb-2">Uå‹ç‰Œé™£</h3>
                    <p class="text-sm text-blue-200 mb-3">è©³ç´°çš„ç™¼å±•éç¨‹</p>
                    <div class="flex justify-center">
                        <div class="flex items-end gap-1">
                            <!-- å·¦å´ï¼š3å¼µç‰Œå‚ç›´æ’åˆ— -->
                            <div class="flex flex-col gap-1">
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                            </div>
                            <!-- ä¸­é–“ï¼š1å¼µç‰Œåœ¨åº•éƒ¨ -->
                            <div class="flex items-end">
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                            </div>
                            <!-- å³å´ï¼š3å¼µç‰Œå‚ç›´æ’åˆ— -->
                            <div class="flex flex-col gap-1">
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- é¸æ“‡ç‰Œé™£ -->
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="choice">
                    <h3 class="text-lg font-semibold mb-2">é¸æ“‡ç‰Œé™£</h3>
                    <p class="text-sm text-blue-200 mb-3">å¹«åŠ©åšå‡ºé¸æ“‡</p>
                    <div class="flex justify-center">
                        <div class="flex flex-col items-center gap-1">
                            <!-- åº•éƒ¨ï¼š2å¼µç‰Œåˆ†é–‹ -->
                            <div class="flex gap-4">
                                <div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div>
                                <div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div>
                            </div>
                            <!-- ä¸­é–“ï¼š2å¼µç‰Œç¨å¾®é è¿‘ -->
                            <div class="flex gap-2">
                                <div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div>
                                <div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div>
                            </div>
                            <!-- é ‚éƒ¨ï¼š1å¼µç‰Œ -->
                            <div class="flex gap-1">
                                <div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- é—œä¿‚(æ„Ÿæƒ…ç‰Œé™£) -->
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="relationship">
                    <h3 class="text-lg font-semibold mb-2">é—œä¿‚(æ„Ÿæƒ…ç‰Œé™£)</h3>
                    <p class="text-sm text-blue-200 mb-3">æ„Ÿæƒ…å•é¡Œå°ˆç”¨</p>
                    <div class="flex justify-center">
                        <div class="flex flex-col items-center gap-1">
                            <!-- æœ€ä¸Šæ–¹ï¼š1å¼µç‰Œ -->
                            <div class="flex justify-center">
                                <div class="w-4 h-6 bg-gradient-to-b from-pink-400 to-pink-600 rounded border border-yellow-300"></div>
                            </div>
                            <!-- ä¸­ä¸Šæ–¹ï¼š1å¼µç‰Œ -->
                            <div class="flex justify-center">
                                <div class="w-4 h-6 bg-gradient-to-b from-pink-400 to-pink-600 rounded border border-yellow-300"></div>
                            </div>
                            <!-- æœ€ä¸‹æ–¹ï¼š2å¼µç‰Œä¸¦æ’ -->
                            <div class="flex gap-2">
                                <div class="w-4 h-6 bg-gradient-to-b from-pink-400 to-pink-600 rounded border border-yellow-300"></div>
                                <div class="w-4 h-6 bg-gradient-to-b from-pink-400 to-pink-600 rounded border border-yellow-300"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å»ºè­°ç‰Œé™£(è§£è—¥ç‰Œé™£) -->
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="advice">
                    <h3 class="text-lg font-semibold mb-2">å»ºè­°ç‰Œé™£(è§£è—¥ç‰Œé™£)</h3>
                    <p class="text-sm text-blue-200 mb-3">ç¾æ³èˆ‡å»ºè­°</p>
                    <div class="flex justify-center space-x-2">
                        <div class="w-8 h-12 bg-gradient-to-b from-teal-400 to-teal-600 rounded border border-yellow-300"></div>
                        <div class="w-8 h-12 bg-gradient-to-b from-teal-400 to-teal-600 rounded border border-yellow-300"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ´—ç‰Œåˆ‡ç‰Œå€ -->
        <div id="shuffleSection" class="max-w-4xl mx-auto mb-8 hidden">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-semibold mb-2">ğŸ”„ æ´—ç‰Œèˆ‡åˆ‡ç‰Œ</h2>
                <p class="text-blue-200">è«‹å…ˆæ´—ç‰Œï¼Œç„¶å¾Œåˆ‡ç‰Œé–‹å§‹å åœ</p>
            </div>
            
            <div class="bg-white/10 backdrop-blur-sm rounded-lg p-8">
                <div class="text-center mb-6">
                    <div id="shuffleDeck" class="inline-block relative">
                        <div class="w-32 h-48 card-back rounded-lg flex items-center justify-center text-4xl cursor-pointer hover:scale-105 transition-transform duration-300 glow">
                            ğŸŒŸ
                        </div>
                        <div class="absolute top-1 left-1 w-32 h-48 card-back rounded-lg opacity-70"></div>
                        <div class="absolute top-2 left-2 w-32 h-48 card-back rounded-lg opacity-40"></div>
                    </div>
                </div>
                
                <div class="text-center space-y-4">
                    <button id="shuffleCardsBtn" class="bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold py-3 px-8 rounded-lg transition-all duration-300 glow">
                        ğŸ”„ æ´—ç‰Œ (å‰©é¤˜ <span id="shuffleCount">3</span> æ¬¡)
                    </button>
                    <br>
                    <button id="cutCardsBtn" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold py-3 px-8 rounded-lg transition-all duration-300 hidden">
                        âœ‚ï¸ åˆ‡ç‰Œ
                    </button>
                </div>
            </div>
        </div>

        <!-- å¿ƒæ…‹ç‰Œå€ -->
        <div id="mindsetSection" class="max-w-4xl mx-auto mb-8 hidden">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-semibold mb-2">ğŸ’­ å¿ƒæ…‹ç‰Œ</h2>
                <p class="text-blue-200">é€™å¼µç‰Œä»£è¡¨ä½ ç›®å‰çš„å¿ƒæ…‹å’Œèƒ½é‡ç‹€æ…‹</p>
            </div>
            
            <div id="mindsetCard" class="bg-white/10 backdrop-blur-sm rounded-lg p-6">
                <!-- å¿ƒæ…‹ç‰Œå°‡ç”± JavaScript ç”Ÿæˆ -->
            </div>
            
            <div class="text-center mt-6">
                <button id="proceedToDrawBtn" class="bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-semibold py-3 px-8 rounded-lg transition-all duration-300 glow">
                    ç¹¼çºŒæŠ½ç‰Œ â¡ï¸
                </button>
            </div>
        </div>

        <!-- æŠ½ç‰Œå€ -->
        <div id="drawSection" class="max-w-6xl mx-auto mb-8 hidden">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-semibold mb-2">ğŸ´ è«‹æŠ½å–ä½ çš„ç‰Œ</h2>
                <p class="text-blue-200">é»æ“Šç‰ŒèƒŒä¾†æŠ½å–å¡”ç¾…ç‰Œ</p>
                <p class="text-sm text-yellow-300 mt-2">éœ€è¦æŠ½å– <span id="cardsNeeded">1</span> å¼µç‰Œ</p>
            </div>
            
            <div class="fan-container mb-8">
                <div id="cardDeck">
                    <!-- ç‰Œçµ„å°‡ç”± JavaScript ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="text-center">
                <button id="revealBtn" class="bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-semibold py-2 px-6 rounded-lg transition-all duration-300 hidden">
                    âœ¨ æŸ¥çœ‹çµæœ
                </button>
            </div>
        </div>

        <!-- çµæœå€ -->
        <div id="resultSection" class="max-w-6xl mx-auto hidden">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-semibold mb-2">ğŸŒŸ å åœçµæœ</h2>
                <div id="questionDisplay" class="text-lg text-yellow-300 mb-4"></div>
                <div id="spreadName" class="text-blue-200"></div>
            </div>
            
            <!-- å¿ƒæ…‹ç‰Œçµæœ -->
            <div id="resultMindsetCard" class="mb-8">
                <!-- å¿ƒæ…‹ç‰Œçµæœå°‡ç”± JavaScript ç”Ÿæˆ -->
            </div>
            
            <div id="resultCards" class="mb-8">
                <!-- çµæœç‰Œå°‡ç”± JavaScript ç”Ÿæˆ -->
            </div>
            
            <div class="text-center">
                <button id="newReadingBtn" class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 px-8 rounded-lg transition-all duration-300 glow">
                    ğŸ”® é–‹å§‹æ–°çš„å åœ
                </button>
            </div>
        </div>
    </div>

    <script>
        // å‰ç‰¹å¡”ç¾…ç‰Œæ•¸æ“š - å®Œæ•´78å¼µç‰Œ
        const tarotCards = [
    { name: "æ„šè€…", number: "0", suit: "å¤§ç‰Œ", meaning: "å¿ƒéˆå¥½ç‰Œã€ä¸–ä¿—å£ç‰Œï¼›é«”é©—èˆ‡è‡ªç”±ã€æ´»åœ¨ç•¶ä¸‹", reversedMeaning: "æ²’æœ‰æ´»åœ¨ç•¶ä¸‹ï¼›å…§å¿ƒææ‡¼è€Œç„¡æ³•é«”é©—ï¼›æ•·è¡ã€å¤±å»è²¬ä»»æ„Ÿ" },
    { name: "é­”æ³•å¸«", number: "I", suit: "å¤§ç‰Œ", meaning: "é–‹å§‹çš„å‰µé€ ï¼›å–„ç”¨çŸ¥è­˜èˆ‡ç¶“é©—ï¼Œåšå°±å°äº†", reversedMeaning: "ç²¾ç¥è€—å¼±ï¼›ä¸é©åˆè¡Œå‹•ï¼›è¡¨é”éšœç¤™ã€è©æ¬ºã€æºé€šä¸è‰¯" },
    { name: "å¥³ç¥­å¸", number: "II", suit: "å¤§ç‰Œ", meaning: "ä»¥éœåˆ¶å‹•ï¼›è‚¯å®šç¾æ³ï¼Œä¸æ”¹è®Šæ˜¯å¥½çš„", reversedMeaning: "ç†æ™ºæ–·ç·šï¼›æ„Ÿæƒ…ç”¨äº‹ï¼›æƒ…ç·’å´©æ½°ã€å£æ˜¯å¿ƒé" },
    { name: "å¥³çš‡", number: "III", suit: "å¤§ç‰Œ", meaning: "å¥³æ€§ä¸»å°ï¼›è±ç››ã€æ”¶ç©«ã€é­…åŠ›èˆ‡çœŸæ„›ç”Ÿæ´»", reversedMeaning: "å¥³æ€§é˜»ç¤™ï¼›æ…µæ‡¶æ‹œé‡‘ï¼›æ”¶ç©«ä¸ä½³ã€ç„¡é­…åŠ›" },
    { name: "çš‡å¸", number: "IV", suit: "å¤§ç‰Œ", meaning: "ç”·æ€§ä¸»å°ï¼›è¦çŸ©åˆ¶åº¦ã€æŒ‰éƒ¨å°±ç­ï¼Œä¸–ä¿—æˆå°±", reversedMeaning: "ç”·æ€§é˜»ç¤™ï¼›æ²’æ“”ç•¶ï¼›å‰›æ„è‡ªç”¨ã€é˜²è¡›å¿ƒå¼·" },
    { name: "æ•™å®—", number: "V", suit: "å¤§ç‰Œ", meaning: "ç¶“é©—æ³•å‰‡ï¼›åœ˜éšŠ/è€å¸«/å‰è¼©çš„å¸¶é ˜", reversedMeaning: "éŒ¯èª¤çš„åœ˜éšŠæˆ–è²´äººï¼›è¨€è¡Œä¸ä¸€ï¼›åƒ¹å€¼è§€ä¸åˆ" },
    { name: "æˆ€äºº", number: "VI", suit: "å¤§ç‰Œ", meaning: "çµç›Ÿ/çµå©šï¼›å—ç¥ç¦çš„é—œä¿‚ï¼Œä½†æ³¨æ„é‚£æ¢è›‡", reversedMeaning: "éŒ¯èª¤æˆ€äººï¼›å©šå¤–æƒ…/å°ä¸‰ï¼›è²Œåˆç¥é›¢ã€æ¼¸è¡Œæ¼¸é " },
    { name: "æˆ°è»Š", number: "VII", suit: "å¤§ç‰Œ", meaning: "æœ‰å„ªå‹¢ã€70%æˆåŠŸç‡ï¼›èƒŒé›¢æƒ…ç·’ç†æ€§å‡ºå¾", reversedMeaning: "ç„¡å„ªå‹¢æˆ–ç”¨éŒ¯æ–¹æ³•ï¼›ä¸æ˜¯ä½ çš„æˆ°å ´å°±æœæ–·æ’¤é€€" },
    { name: "åŠ›é‡", number: "VIII", suit: "å¤§ç‰Œ", meaning: "ä»¥æŸ”å…‹å‰›ã€ä»¥å¾·æœäººï¼›é•·æœŸæˆ°å½¹èƒ½æå®šå±€é¢", reversedMeaning: "è¢«å•é¡Œç‰½è‘—èµ°ï¼›ç„¡åŠ›æ„Ÿã€å¤±å»å‹‡æ°£èˆ‡æºé€š" },
    { name: "éš±å£«", number: "IX", suit: "å¤§ç‰Œ", meaning: "å¿ƒéˆå¥½ç‰Œã€ä¸–ä¿—å£ç‰Œï¼›æ–¹å‘æ­£ç¢ºä½†é‚„åœ¨è·¯ä¸Š", reversedMeaning: "æ–¹å‘éŒ¯èª¤ï¼›è‡ªæˆ‘å°é–‰ã€æ›´å­¤ç¨ã€ä¸è¢«ç†è§£" },
    { name: "å‘½é‹ä¹‹è¼ª", number: "X", suit: "å¤§ç‰Œ", meaning: "å¥½é‹è‡¨é–€ã€åšä¸€å¾—åï¼›æ™‚æ©Ÿå°äº†", reversedMeaning: "æ™‚æ©Ÿæœªåˆ°ã€éŒ¯éæ©Ÿæœƒï¼›å¾ˆè¡°ã€é‹æ°£ä¸å¥½" },
    { name: "æ­£ç¾©", number: "XI", suit: "å¤§ç‰Œ", meaning: "åšä¸€å¾—ä¸€ï¼›å…¬å¹³è¡¡é‡ã€åˆæ³•ç°½ç´„çœ‹ç´°ç¯€", reversedMeaning: "ä¸åˆæ³•/é€ å‡ï¼›ä¸å…¬åˆ¤æ±ºï¼›ä»˜å‡ºèˆ‡æ”¶ç©«ä¸å°ç­‰" },
    { name: "åŠäºº", number: "XII", suit: "å¤§ç‰Œ", meaning: "çŠ§ç‰²/å¥‰ç»ï¼›æ›ä½æ€è€ƒã€ç”˜é¡˜å—æŸç¸›ç‚ºå¤§å±€", reversedMeaning: "ä¸ç”˜å—æŸç¸›ï¼›å¤±å»ä¿¡å¿µã€æƒ³é›¢å»é›£é›¢" },
    { name: "æ­»ç¥", number: "XIII", suit: "å¤§ç‰Œ", meaning: "çµæŸèˆ‡è›»è®Šï¼›æ²’æœ‰æ­»å“ªæœ‰ç”Ÿï¼Œè¿æ–°é–‹å§‹", reversedMeaning: "æ­¹æˆ²æ‹–æ£šï¼›ææ‡¼æ”¹è®Šã€ä¸æ­»å¿ƒä½†çµ‚æœƒçµæŸ" },
    { name: "ç¯€åˆ¶", number: "XIV", suit: "å¤§ç‰Œ", meaning: "æºé€šäº¤æµ/è·¨å‡ºå»ï¼›åšäº‹è¦æœ‰é™åº¦èˆ‡ç¯€åˆ¶", reversedMeaning: "æºé€šä¸è‰¯ï¼›é©æ‡‰ä¸è‰¯ã€è·¨ä¸å‡ºå»ï¼›ä¸ç¯€åˆ¶" },
    { name: "æƒ¡é­”", number: "XV", suit: "å¤§ç‰Œ", meaning: "ä¸–ä¿—å¥½ç‰Œã€å¿ƒéˆå£ç‰Œï¼›ç­‰åƒ¹äº¤æ›ï¼Œä»˜å‡ºä»£åƒ¹", reversedMeaning: "äº¤æ›ä¸èµ·ã€è¢«ç¶‘ç¶ï¼›æ¨æ£„å¾Œæ‰èƒ½ç²å¾—" },
    { name: "é«˜å¡”", number: "XVI", suit: "å¤§ç‰Œ", meaning: "æ„å¤–/æ™´å¤©éœ¹é‚ï¼›èªæ¸…ç¾å¯¦ã€ç æ‰é‡ç·´", reversedMeaning: "ä½ çµ¦åˆ¥äººæ„å¤–ï¼›å‚·å®³ä¸å¦‚é æœŸï¼›å°æ„å¤–/æ‹’çµ•é‚€è«‹" },
    { name: "æ˜Ÿæ˜Ÿ", number: "XVII", suit: "å¤§ç‰Œ", meaning: "æ˜Ÿé‹åŠ æŒã€æˆåŠŸç‡æé«˜ï¼›æœ‰ä¿¡å¿ƒèˆ‡å¸Œæœ›", reversedMeaning: "æ˜Ÿé‹é€†è¡Œã€æ™‚æ©Ÿä¸åˆ°ï¼›ç”±å¸Œæœ›è®Šå¤±æœ›" },
    { name: "æœˆäº®", number: "XVIII", suit: "å¤§ç‰Œ", meaning: "ä¸å®‰ä½†å¯æ§ï¼›æƒ…æ³ä¸æ˜ï¼Œå±…å®‰æ€å±", reversedMeaning: "å¼·ä½œé®å®šå»ææ‡¼ï¼›æ¥µåº¦ä¸å®‰ï¼Œå…ˆå†·è™•ç†" },
    { name: "å¤ªé™½", number: "XIX", suit: "å¤§ç‰Œ", meaning: "èµ¤å­ä¹‹å¿ƒï¼›é–‹å¿ƒå¿«æ¨‚ã€å£äº‹ä¸ä¾†ã€å¥½å¤©æ°£", reversedMeaning: "ç¾ä¸­ä¸è¶³ã€é™°å¤©ï¼›ç”Ÿå‘½åŠ›ä¸è¶³" },
    { name: "å¯©åˆ¤", number: "XX", suit: "å¤§ç‰Œ", meaning: "å¥½æ¶ˆæ¯/æå‡ï¼›å¾æ­¤éšæ®µé‚å‘ä¸‹ä¸€éšæ®µï¼Œå¾©æ´»", reversedMeaning: "æ²’æ¶ˆæ¯/å£æ¶ˆæ¯ï¼›æ²’æœ‰æå‡ã€ç„¡æ³•å¾©åˆ" },
    { name: "ä¸–ç•Œ", number: "XXI", suit: "å¤§ç‰Œ", meaning: "åœ“æ»¿å®Œæˆï¼›å¥½èšå¥½æ•£ï¼Œé‚å‘æ–°æ—…ç¨‹", reversedMeaning: "ä¸åœ“æ»¿ã€æœªå®Œæˆï¼›ç„¡æ³•å‡ºå»ç©" },
    { name: "æ¬Šæ–ACE", number: "A", suit: "æ¬Šæ–", meaning: "æ–°çš„è¡Œå‹•ï¼›è¨˜å¾—åˆå¿ƒï¼Œäº‹æƒ…å¾€å¥½çš„ç™¼å±•", reversedMeaning: "ä¸å¯è¡Œå‹•ï¼›å¤±å»æ¬ŠåŠ›ï¼›åœ°ä¸‹æƒ…/å…§å®š" },
    { name: "æ¬Šæ–äºŒ", number: "2", suit: "æ¬Šæ–", meaning: "éƒ½æ˜¯å¥½çš„ï¼›é¸Aæˆ–Béƒ½å¯ä»¥ï¼Œèµ°æˆ–ç•™çš†å¯", reversedMeaning: "è™•æ–¼è¢«å‹•ï¼›æ²’æœ‰é¸æ“‡æ¬Šï¼Œè¢«è¿«æ¥å—" },
    { name: "æ¬Šæ–ä¸‰", number: "3", suit: "æ¬Šæ–", meaning: "ç­‰å¾…/ç«™å°å±±é ­ï¼›æ©Ÿæœƒä¾†äº†å°±æŠŠæ¡", reversedMeaning: "å¿ƒæ…‹å¤ªæ€¥ï¼›ç«™éŒ¯å±±é ­ï¼Œç›®å…‰ä¸é " },
    { name: "æ¬Šæ–å››", number: "4", suit: "æ¬Šæ–", meaning: "æ…¶ç¥ï¼›çµå©š/è¨‚å©š/æ´¾å°ï¼›å®‰å®šå®‰å…¨æ„Ÿ", reversedMeaning: "ä¸æ…¶ç¥ï¼›å–œäº‹å»¶æœŸ/å–æ¶ˆ" },
    { name: "æ¬Šæ–äº”", number: "5", suit: "æ¬Šæ–", meaning: "æ„è¦‹ä¸åˆçš„å¥½çˆ­åµï¼›æå‡ºå®šè¦‹å¯ä¿ƒæˆé€²å±•", reversedMeaning: "æ²’çµè«–çš„çˆ­åµï¼›æš—é¬¥èˆ‡æ··äº‚ã€æ¨¡ä»¿éŒ¯èª¤" },
    { name: "æ¬Šæ–å…­", number: "6", suit: "æ¬Šæ–", meaning: "å‹åˆ©èˆ‡æ¦®è€€ï¼›è¦æœ‰äººé¦¬æ“æˆ´", reversedMeaning: "å¤±æ•—ï¼›ä¸è¢«æ“æˆ´" },
    { name: "æ¬Šæ–ä¸ƒ", number: "7", suit: "æ¬Šæ–", meaning: "æŠµæŠ—/æŒ‘æˆ°ï¼›å …æŒåˆ°æœ€å¾Œå°±æœƒå‹", reversedMeaning: "æŒ‘æˆ°å¤±æ•—ï¼›ä¸è‡ªé‡åŠ›ï¼›ä¸æ˜¯ä½ çš„æˆ°å ´" },
    { name: "æ¬Šæ–å…«", number: "8", suit: "æ¬Šæ–", meaning: "å¿«é€Ÿ/æ—…è¡Œ/å¿™ç¢Œï¼›äº‹å‹™å¿«é€Ÿæ¨é€²", reversedMeaning: "ä¸è‡ªç”±ï¼›çå¿™å¤±åºï¼›ä¸èƒ½æ—…è¡Œ" },
    { name: "æ¬Šæ–ä¹", number: "9", suit: "æ¬Šæ–", meaning: "å›°é “ä½†ä»å¯ä¸€æ­¥ä¸€æ­¥å‰é€²ï¼›å¯©æ…æ€è€ƒ", reversedMeaning: "è³‡æºè‡¨ç•Œï¼›è¢«è¿«æ‡‰æˆ°ï¼›ä¸èƒ½ä¼‘æ¯" },
    { name: "æ¬Šæ–å", number: "10", suit: "æ¬Šæ–", meaning: "å£“åŠ›æ²‰é‡ä½†ç”˜é¡˜æ‰¿æ“”ï¼›å¯å°‹æ±‚åˆ†æ“”", reversedMeaning: "éè‡ªé¡˜æ‰¿æ“”ï¼›å¿«è¢«å£“å®ï¼›æ”¾ä¸ä¸‹" },
    { name: "æ¬Šæ–ä¾è€…", number: "ä¾è€…", suit: "æ¬Šæ–", meaning: "å°‹æ‰¾æ–°æ–¹å‘ï¼›å¥½æ¶ˆæ¯ï¼›åƒå­©å­èˆ¬çš„äº¤æµ", reversedMeaning: "å„ªæŸ”å¯¡æ–·/åœæ»¯ï¼›å£æ¶ˆæ¯æˆ–èª¤å°" },
    { name: "æ¬Šæ–é¨å£«", number: "é¨å£«", suit: "æ¬Šæ–", meaning: "æŒæ¡æ©Ÿæœƒé–‹å‰µæ–°å±€ï¼›æ”¹è®Š/æ—…è¡Œ/æŒ‘æˆ°", reversedMeaning: "éŒ¯å¤±æ©Ÿæœƒï¼›è¡Œå‹•å»¶é²ï¼›ç¼ºä¹è¨ˆç•«" },
    { name: "æ¬Šæ–çš‡å", number: "çš‡å", suit: "æ¬Šæ–", meaning: "é–‹æœ—ç†±å¿ƒï¼›é ˜å°åŠ›èˆ‡éˆæ„Ÿï¼Œäº‹æ¥­æˆåŠŸ", reversedMeaning: "äººéš›ä¸å’Œï¼›è¡å‹•æ¶ˆè²»/æŠ•è³‡ï¼›æƒ…ç·’åŒ–" },
    { name: "æ¬Šæ–åœ‹ç‹", number: "åœ‹ç‹", suit: "æ¬Šæ–", meaning: "ç©©é‡å …å¼·ï¼›è¡Œå‹•åŠ›å¼·ã€ä¸»å°æŒæ§", reversedMeaning: "è¡å‹•è‡ªå¤§ï¼›å°ˆåˆ¶æ¿«æ¬Š" },
    { name: "è–æ¯ACE", number: "A", suit: "è–æ¯", meaning: "æ–°çš„å–œæ­¡/æ–°æˆ€æƒ…ï¼›èµ·å¿ƒå‹•å¿µ", reversedMeaning: "ä¸é‚£éº¼æ„›äº†ï¼›ç©ºè™›èˆ‡ä¸å¿«æ¨‚" },
    { name: "è–æ¯äºŒ", number: "2", suit: "è–æ¯", meaning: "å…¬å¹³å¿«é€Ÿçš„äº¤æµ/å¥‘ç´„ï¼›æ‰¾åˆ°åˆæ‹å¤¥ä¼´", reversedMeaning: "ä¸å…¬å¹³å¥‘ç´„ï¼›æºé€šä¸è‰¯/å­¸ç¿’ä¸ä½³" },
    { name: "è–æ¯ä¸‰", number: "3", suit: "è–æ¯", meaning: "åˆä½œæ„‰å¿«ä¸”è±æ”¶ï¼›é‡è¦çš„ç¬¬ä¸‰è€…/è²´äºº", reversedMeaning: "åˆä½œä¸æ„‰å¿«ï¼›æ„Ÿæƒ…å‡ºç¾ç¬¬ä¸‰è€…" },
    { name: "è–æ¯å››", number: "4", suit: "è–æ¯", meaning: "ä¸€å€‹æ©Ÿæœƒï¼›åœ¨æƒ³è¦ä¸è¦åšï¼ŒæˆåŠŸç‡ç´„25%", reversedMeaning: "æ‹¿ä¸åˆ°é‚„å¤±å»åŸæœ‰ï¼›è¡Œå‹•ä¸æœƒæˆåŠŸ" },
    { name: "è–æ¯äº”", number: "5", suit: "è–æ¯", meaning: "å¤±æˆ€/å¤±æœ›ï¼›éœ€è¦æ™‚é–“ç™‚å‚·", reversedMeaning: "æƒ…ç·’å›æ­¸ï¼›èµ°å‡ºå‚·ç—›" },
    { name: "è–æ¯å…­", number: "6", suit: "è–æ¯", meaning: "å›æ†¶/ç…§é¡§/å‚³æ‰¿ï¼›å®‰å…¨çš„ç’°å¢ƒèˆ‡çµ¦äºˆ", reversedMeaning: "æ”¹è®Šç…§é¡§é—œä¿‚ï¼›ä½ å¿…é ˆç…§é¡§åˆ¥äºº" },
    { name: "è–æ¯ä¸ƒ", number: "7", suit: "è–æ¯", meaning: "ä¸çŸ¥é“è‡ªå·±è¦ä»€éº¼ï¼›ç™½æ—¥å¤¢èˆ‡è¿·æƒ‘", reversedMeaning: "æ¼¸æ¼¸æ˜ç™½ï¼›ä¸å†è¿·æƒ‘" },
    { name: "è–æ¯å…«", number: "8", suit: "è–æ¯", meaning: "å¯ä»¥é›¢é–‹å»è¿½å¤¢ï¼›å¾€å¿ƒä¹‹æ‰€å‘å‡ºç™¼", reversedMeaning: "ä¸èƒ½é›¢é–‹ï¼›å¿ƒæ›´å­¤ç¨" },
    { name: "è–æ¯ä¹", number: "9", suit: "è–æ¯", meaning: "å¿—å¾—æ„æ»¿ã€æˆå°±æ„Ÿï¼›ä½†ä¸æ‰“ç®—åˆ†äº«", reversedMeaning: "ä¸æ»¿æ„ï¼›æ²’æˆå°±æ„Ÿ" },
    { name: "è–æ¯å", number: "10", suit: "è–æ¯", meaning: "å¹¸ç¦å’Œç¦å¦‚ä¸€å®¶ï¼›æ‰¾åˆ°å¿—åŒé“åˆåœ˜éšŠ", reversedMeaning: "åœ˜é«”ä¸å’Œï¼›æ²’å®‰å…¨æ„Ÿ/ç„¡æ³•å‚³æ‰¿" },
    { name: "è–æ¯ä¾è€…", number: "ä¾è€…", suit: "è–æ¯", meaning: "æ–°æœ‹å‹/å‘Šç™½/é‚€ç´„ï¼›æƒ…ç«‡åˆé–‹èˆ‡æœå‹™", reversedMeaning: "æ›–æ˜§ä¸å®šï¼›ä¸æƒ³è² è²¬ï¼›å–æ¶ˆ/å»¶é²" },
    { name: "è–æ¯é¨å£«", number: "é¨å£«", suit: "è–æ¯", meaning: "äº¤éš›èˆ‡é‚€ç´„ï¼›æµªæ¼«æ—…è¡Œã€æˆ€æ„›æ©Ÿæœƒ", reversedMeaning: "é€ƒé¿ç¾å¯¦ï¼›è¬¹æ…é‚€ç´„ï¼›æé˜²è©æ¬º" },
    { name: "è–æ¯çš‡å", number: "çš‡å", suit: "è–æ¯", meaning: "æº«æŸ”å‚¾è½ï¼›æƒ…æ„Ÿæ”¯æŒã€å–„è§£äººæ„", reversedMeaning: "æƒ…ç·’åŒ–/ä¾è³´ï¼›ä¸èª å¯¦/ä¸å€¼å¾—ä¿¡è³´" },
    { name: "è–æ¯åœ‹ç‹", number: "åœ‹ç‹", suit: "è–æ¯", meaning: "è¦ªåˆ‡æ…ˆå–„ï¼›é¡§å®¶ã€é«”è²¼çš„ç†Ÿç”·", reversedMeaning: "é›™é¢äººï¼›å¤–é‡é¢¨æµï¼›ä¸èª å¯¦" },
    { name: "å¯¶åŠACE", number: "A", suit: "å¯¶åŠ", meaning: "æ–°çš„è¨ˆç•«ï¼›ç†æ€§èˆ‡æ¸…æ™°çš„æƒ³æ³•", reversedMeaning: "æ²’æœ‰è¨ˆç•«ï¼›éŒ¯èª¤ä¸”ä¸ç†æ€§çš„è¨ˆç•«" },
    { name: "å¯¶åŠäºŒ", number: "2", suit: "å¯¶åŠ", meaning: "å…©é›£ä½†ä¸æ€¥ï¼›å¯å†æ€è€ƒå¾Œæ±ºå®š", reversedMeaning: "å…©é›£ä¸”æ€¥ï¼›æ‹–å»¶æœƒå‚·åˆ°è‡ªå·±ï¼Œéœ€å¿«æ±ºå®š" },
    { name: "å¯¶åŠä¸‰", number: "3", suit: "å¯¶åŠ", meaning: "å¿ƒç—›/è¢«èƒŒå›ï¼›æƒ…ç·’å¦‚é›¨å¤©", reversedMeaning: "ä½ å‚·å®³äº†åˆ¥äººï¼›ä½ èƒŒå›äº†åˆ¥äºº" },
    { name: "å¯¶åŠå››", number: "4", suit: "å¯¶åŠ", meaning: "ä¼‘æ¯/ä¼‘æˆ°ï¼›é—œä¿‚åœæ»¯ã€å¿ƒå¾ˆç´¯", reversedMeaning: "ä¸èƒ½æˆ–ä¸ç”¨ä¼‘æ¯ï¼›éå‹é è­¦" },
    { name: "å¯¶åŠäº”", number: "5", suit: "å¯¶åŠ", meaning: "çˆ­å‹ï¼›è¡¨é¢è´å¯¦å‰‡ç„¡æ‰€å¾—", reversedMeaning: "æŒ«æ•—æ„Ÿï¼›ä½†å¯¦éš›æ²’å¤±å»ä»€éº¼" },
    { name: "å¯¶åŠå…­", number: "6", suit: "å¯¶åŠ", meaning: "æ­£åœ¨ç™‚å‚·ï¼›å›å®¶/å¾Aåˆ°Bï¼›æš—åº¦é™³å€‰", reversedMeaning: "ç„¡æ³•æ­¸é„‰ï¼›ä¸èƒ½å¾Aåˆ°Bï¼›å‚·å£å…¬é–‹" },
    { name: "å¯¶åŠä¸ƒ", number: "7", suit: "å¯¶åŠ", meaning: "å›°é›£ä¸”å¸¶å‚·å®³æ€§çš„æŒ‘æˆ°ï¼›å·å·ä¾†", reversedMeaning: "å·å·ä¾†è¢«æŠ“ï¼›å¤§ç¦è‡¨é ­" },
    { name: "å¯¶åŠå…«", number: "8", suit: "å¯¶åŠ", meaning: "ä½œç¹­è‡ªç¸›ï¼›è¢«è‡ªå·±çš„æƒ³æ³•å›°ä½", reversedMeaning: "æƒ³é–‹äº†ï¼›è‡ªç”±äº†" },
    { name: "å¯¶åŠä¹", number: "9", suit: "å¯¶åŠ", meaning: "å™©å¤¢èˆ‡ç…©æƒ±ï¼›å…ˆçœ‹æ¸…å±€å‹¢å»è™•ç†", reversedMeaning: "æ›´åš´é‡ç„¡æ³•è™•ç†ï¼›å…ˆå†·è™•ç†" },
    { name: "å¯¶åŠå", number: "10", suit: "å¯¶åŠ", meaning: "çµæŸ/æ­»å¿ƒï¼›ç²¾ç¥é»‘æš—åˆ°çµ•æœ›", reversedMeaning: "å…‰æ˜é‡ç¾ï¼›è¿å‘æ›™å…‰" },
    { name: "å¯¶åŠä¾è€…", number: "ä¾è€…", suit: "å¯¶åŠ", meaning: "æ‰“è½æ¶ˆæ¯ï¼›æé«˜è­¦è¦º/å­¸ç¿’ä¸­", reversedMeaning: "æ•£æ’­è¬ è¨€/å£èˆŒæ˜¯éï¼›éš±ç§æ›å…‰" },
    { name: "å¯¶åŠé¨å£«", number: "é¨å£«", suit: "å¯¶åŠ", meaning: "è¡åˆºèˆ‡å¿«ç¯€å¥ï¼›æœ‰å›°é›£ä½†å¯ç«‹å³è™•ç†", reversedMeaning: "å›°é›£åŠ åŠ‡è¢«æ‹–å»¶ï¼›æ²®å–ªæ¶ˆæ¯/æ„å¤–" },
    { name: "å¯¶åŠçš‡å", number: "çš‡å", suit: "å¯¶åŠ", meaning: "è¨€è©çŠ€åˆ©ï¼›ç¨ç«‹ã€æ´å¯Ÿå¼·ï¼Œåˆ†æä¸€é‡è¦‹è¡€", reversedMeaning: "åˆ†é›¢/å¤±æˆ€çš„ç—›æ›´æ·±ï¼›æ¬å¼„æ˜¯é" },
    { name: "å¯¶åŠåœ‹ç‹", number: "åœ‹ç‹", suit: "å¯¶åŠ", meaning: "åš´è‚…å…¬æ­£ï¼›å°ˆæ¥­ç†æ€§ã€æ±ºæ–·æºé€šå¼·", reversedMeaning: "è„¾æ°£å£ï¼›å†·è¡€ç„¡æƒ…ã€å°ˆæ¥­ä¸è¶³/ä¸å…¬" },
    { name: "éŒ¢å¹£ACE", number: "A", suit: "éŒ¢å¹£", meaning: "æ–°å·¥ä½œ/æ–°è²¡å¯Œï¼›å‹™å¯¦é—œä¿‚èˆ‡è±ç››", reversedMeaning: "ä¸å‹™å¯¦/æ‰éŒ¢ï¼›æ–°è²¡å¯Œä¸ç©©ã€ç”¨éŒ¢è²·é—œä¿‚" },
    { name: "éŒ¢å¹£äºŒ", number: "2", suit: "éŒ¢å¹£", meaning: "å¯ä»¥å…¼å¾—ï¼›å‘¨è½‰é›–è‹¦ä»æ¸¸åˆƒæœ‰é¤˜", reversedMeaning: "ä¸èƒ½å…¼å¾—ï¼›æ£„è»Šä¿å¸¥ï¼›å‘¨è½‰ä¸éˆ" },
    { name: "éŒ¢å¹£ä¸‰", number: "3", suit: "éŒ¢å¹£", meaning: "å°ˆæ¥­åˆä½œæ„‰å¿«ï¼›å»ºç«‹ç©©å›ºåŸºç¤", reversedMeaning: "ä¸å°ˆæ¥­/æ‹†å¤¥ï¼›åŸºç¤ä¸ç©©å›º" },
    { name: "éŒ¢å¹£å››", number: "4", suit: "éŒ¢å¹£", meaning: "å°æ°£ä¿å®ˆï¼›æ”¶å…¥ä¸æ–·å¢åŠ ä½†ä¸é¡˜åˆ†äº«", reversedMeaning: "æ¥µåº¦å°æ°£ç„¡å®‰å…¨æ„Ÿï¼›è¦ºå¾—éŒ¢ä¸è¦‹äº†" },
    { name: "éŒ¢å¹£äº”", number: "5", suit: "éŒ¢å¹£", meaning: "è²¡å‹™ä½æ½®çš„çª®é¬¼ç‰Œï¼›çœ‹ä¸åˆ°å¿ƒéˆè²¡å¯Œ", reversedMeaning: "æ‰¾åˆ°æ–¹æ³•èµ°å‡ºè²¡å‹™ä½æ½®" },
    { name: "éŒ¢å¹£å…­", number: "6", suit: "éŒ¢å¹£", meaning: "é›‡å‚­/ä¸Šå°ä¸‹äº¤æ›ï¼›æ‰¾åˆ°æ»¿æ„å·¥ä½œ", reversedMeaning: "å¤©ç§¤å¤±è¡¡ï¼›ä¸é¡˜å†äº¤æ›" },
    { name: "éŒ¢å¹£ä¸ƒ", number: "7", suit: "éŒ¢å¹£", meaning: "æŠ•è³‡å‰æ€è€ƒç›®çš„ï¼›æ„Ÿæƒ…æ˜¯ä¸€é–€æŠ•è³‡", reversedMeaning: "æŠ•è³‡è³ éŒ¢ï¼›ä¸é¡˜ç¹¼çºŒï¼›é¸éŒ¯äºº" },
    { name: "éŒ¢å¹£å…«", number: "8", suit: "éŒ¢å¹£", meaning: "åŠªåŠ›å·¥ä½œ/ç²¾é€²ï¼›é—œä¿‚åŠªåŠ›ç¶­æŒå‰é€²", reversedMeaning: "ä¸èªçœŸ/å¿—ä¸åœ¨æ­¤ï¼›ç„¡æ³•ç²æ”¶ç›Š" },
    { name: "éŒ¢å¹£ä¹", number: "9", suit: "éŒ¢å¹£", meaning: "è¢«å‹•æ”¶å…¥ï¼›æœ‰éŒ¢æœ‰é–’ã€æ‚ é–’ç’°å¢ƒ", reversedMeaning: "æœ‰éŒ¢æ²’é–’æˆ–æ²’éŒ¢æœ‰é–’ï¼›å½å–®èº«/è¢«æ¬ºé¨™" },
    { name: "éŒ¢å¹£å", number: "10", suit: "éŒ¢å¹£", meaning: "æœ‰éŒ¢çš„è±¡å¾µï¼›è²¡å‹™åœ“æ»¿ï¼Œé‡è²¡ä¸é‡æƒ…", reversedMeaning: "å› æƒ…æ„Ÿç–é›¢è‡´è²¡å‹™å±æ©Ÿï¼›å®¶åº­ä¸å’Œ" },
    { name: "éŒ¢å¹£ä¾è€…", number: "ä¾è€…", suit: "éŒ¢å¹£", meaning: "è…³è¸å¯¦åœ°èªçœŸå­¸ç¿’ï¼›å°é€²å¸³/å°ç”Ÿæ„", reversedMeaning: "æµªè²»é‡‘éŒ¢ï¼›çŸ¥è­˜è²§ä¹/ç ”ç©¶ä¸æ·±" },
    { name: "éŒ¢å¹£é¨å£«", number: "é¨å£«", suit: "éŒ¢å¹£", meaning: "è¬¹æ…å‹™å¯¦ï¼›åŠªåŠ›ç´¯ç©èˆ‡ç†è²¡/å®šé»æ—…è¡Œ", reversedMeaning: "ç„¡å¿ƒå·¥ä½œä¸è² è²¬ï¼›è²¡å‹™ç›¸é—œè¡Œå‹•ä¸ä½³" },
    { name: "éŒ¢å¹£çš‡å", number: "çš‡å", suit: "éŒ¢å¹£", meaning: "ç¹æ¦®å®‰å®šï¼›ç†è²¡å¾—å®œï¼Œçµ¦äºˆæ”¯æŒç…§é¡§", reversedMeaning: "åå—‡å¯’é…¸ï¼›è²¡å‹™å‡ºå•é¡Œ/äº‚èŠ±éŒ¢" },
    { name: "éŒ¢å¹£åœ‹ç‹", number: "åœ‹ç‹", suit: "éŒ¢å¹£", meaning: "å¯Œè£•è¸å¯¦ï¼›ä¿å®ˆå‹™å¯¦ã€é‡‘ä¸»å‹äººç‰©", reversedMeaning: "åå—‡å›ºåŸ·è²ªå©ªï¼›è²¡å‹™å±æ©Ÿ/å¤±å»é å±±" }
];

        // ç‰Œé™£é…ç½®
        const spreads = {
            timeflow: {
                name: "æ™‚é–“ä¹‹æµ",
                positions: ["éå»", "ç¾åœ¨", "æœªä¾†"],
                cardCount: 3
            },
            davidstar: {
                name: "å¤§è¡›ä¹‹æ˜Ÿç‰Œé™£",
                positions: ["éå»", "ç¾åœ¨", "æœªä¾†", "åŸå› ", "ç’°å¢ƒ", "å°ç­–"],
                cardCount: 6
            },
            ushape: {
                name: "Uå‹ç‰Œé™£",
                positions: ["éå»", "ç¾åœ¨", "ä¸­é–“éç¨‹", "æ…£æ€§æ–¹å‘", "ç’°å¢ƒ", "å›°é›£", "ç­”æ¡ˆ"],
                cardCount: 7
            },
            choice: {
                name: "é¸æ“‡ç‰Œé™£",
                positions: ["ç¾æ³", "é¸é …Aéç¨‹", "é¸é …Béç¨‹", "é¸é …Açµæœ", "é¸é …Bçµæœ"],
                cardCount: 5
            },
            relationship: {
                name: "é—œä¿‚(æ„Ÿæƒ…ç‰Œé™£)",
                positions: ["æŠ½ç‰Œäººç¾æ³(ç‹€æ…‹)", "å°æ–¹ç¾æ³(ç‹€æ…‹)", "éç¨‹", "çµæœ"],
                cardCount: 4
            },
            advice: {
                name: "å»ºè­°ç‰Œé™£(è§£è—¥ç‰Œé™£)",
                positions: ["ç¾æ³", "å»ºè­°"],
                cardCount: 2
            }
        };

        let currentQuestion = "";
        let currentSpread = "";
        let selectedCards = [];
        let drawnCards = [];
        let shuffledDeck = [];
        let mindsetCard = null;
        let shuffleRemaining = 3;
        let supportCards = {}; // å„²å­˜æ¯å€‹ä½ç½®çš„è¼”åŠ©ç‰Œ
        let supportCardCounts = {}; // è¨˜éŒ„æ¯å€‹ä½ç½®å·²æŠ½å–çš„è¼”åŠ©ç‰Œæ•¸é‡

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
        });

        function setupEventListeners() {
            document.getElementById('nextBtn').addEventListener('click', showSpreadSelection);
            
            document.querySelectorAll('.spread-option').forEach(option => {
                option.addEventListener('click', function() {
                    selectSpread(this.dataset.spread);
                });
            });

            document.getElementById('shuffleCardsBtn').addEventListener('click', performShuffle);
            document.getElementById('cutCardsBtn').addEventListener('click', performCut);
            document.getElementById('proceedToDrawBtn').addEventListener('click', proceedToDrawing);
            document.getElementById('revealBtn').addEventListener('click', revealResults);
            document.getElementById('newReadingBtn').addEventListener('click', startNewReading);
        }

        function showSpreadSelection() {
            const question = document.getElementById('questionInput').value.trim();
            if (!question) {
                alert('è«‹å…ˆè¼¸å…¥ä½ çš„å•é¡Œï¼');
                return;
            }
            
            currentQuestion = question;
            document.getElementById('questionSection').classList.add('hidden');
            document.getElementById('spreadSection').classList.remove('hidden');
        }

        function selectSpread(spreadType) {
            currentSpread = spreadType;
            document.getElementById('spreadSection').classList.add('hidden');
            document.getElementById('shuffleSection').classList.remove('hidden');
            
            // é‡ç½®æ´—ç‰Œç‹€æ…‹
            shuffleRemaining = 3;
            document.getElementById('shuffleCount').textContent = shuffleRemaining;
            document.getElementById('shuffleCardsBtn').classList.remove('hidden');
            document.getElementById('cutCardsBtn').classList.add('hidden');
            
            // åˆå§‹åŒ–ç‰Œçµ„
            shuffledDeck = [...tarotCards];
        }

        function performShuffle() {
            // æ´—ç‰Œå‹•ç•«æ•ˆæœ
            const shuffleDeck = document.getElementById('shuffleDeck');
            shuffleDeck.style.transform = 'rotate(10deg)';
            
            setTimeout(() => {
                shuffleDeck.style.transform = 'rotate(-10deg)';
            }, 200);
            
            setTimeout(() => {
                shuffleDeck.style.transform = 'rotate(0deg)';
            }, 400);
            
            // å¯¦éš›æ´—ç‰Œé‚è¼¯
            for (let i = shuffledDeck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledDeck[i], shuffledDeck[j]] = [shuffledDeck[j], shuffledDeck[i]];
            }
            
            shuffleRemaining--;
            document.getElementById('shuffleCount').textContent = shuffleRemaining;
            
            if (shuffleRemaining <= 0) {
                document.getElementById('shuffleCardsBtn').classList.add('hidden');
                document.getElementById('cutCardsBtn').classList.remove('hidden');
            }
        }

        function performCut() {
    // åˆ‡ç‰Œå‹•ç•«
    const shuffleDeck = document.getElementById('shuffleDeck');
    shuffleDeck.style.transform = 'translateX(-20px)';
    setTimeout(() => {
        shuffleDeck.style.transform = 'translateX(20px)';
    }, 300);
    setTimeout(() => {
        shuffleDeck.style.transform = 'translateX(0px)';
    }, 600);

    // åˆ‡ç‰Œé‚è¼¯ - éš¨æ©Ÿåˆ‡é»
    const cutPoint = Math.floor(Math.random() * (shuffledDeck.length - 20)) + 10;
    const topHalf = shuffledDeck.slice(0, cutPoint);
    const bottomHalf = shuffledDeck.slice(cutPoint);
    shuffledDeck = [...bottomHalf, ...topHalf];

    // æŠ½å–å¿ƒæ…‹ç‰Œï¼ˆç¬¬ä¸€å¼µï¼‰ä¸¦åŠ å…¥é€†ä½æ©Ÿç‡
    const isReversed = Math.random() < 0.5;
    mindsetCard = {
        ...shuffledDeck[0],
        reversed: isReversed
    };

    // å¾ç‰Œå †ç§»é™¤è©²å¼µï¼Œä¸¦æ”¾å›ç‰Œå †åº•ï¼Œç¶­æŒ 78 å¼µå¯æŠ½
    shuffledDeck = shuffledDeck.slice(1);
    shuffledDeck.push(mindsetCard);

    setTimeout(() => {
        document.getElementById('shuffleSection').classList.add('hidden');
        document.getElementById('mindsetSection').classList.remove('hidden');
        displayMindsetCard();
    }, 800);
}

        function displayMindsetCard() {
            const mindsetContainer = document.getElementById('mindsetCard');
            const meaning = mindsetCard.reversed ? mindsetCard.reversedMeaning : mindsetCard.meaning;
            const orientation = mindsetCard.reversed ? "é€†ä½" : "æ­£ä½";
            
            mindsetContainer.innerHTML = `
                <div class="flex items-center justify-center">
                    <div class="card-front w-32 h-48 rounded-lg flex flex-col items-center justify-center text-center mr-6 ${mindsetCard.reversed ? 'card-reversed' : ''} glow">
                        <div class="text-sm font-bold text-yellow-300">${mindsetCard.number}</div>
                        <div class="text-lg font-semibold text-white mb-2">${mindsetCard.name}</div>
                        <div class="text-sm text-blue-200">${mindsetCard.suit}</div>
                    </div>
                    <div class="flex-1 text-left">
                        <h3 class="text-2xl font-semibold text-yellow-300 mb-2">ğŸ’­ å¿ƒæ…‹ç‰Œ</h3>
                        <h4 class="text-xl font-medium text-white mb-2">${mindsetCard.name} (${orientation})</h4>
                        <p class="text-blue-200 text-lg leading-relaxed">${meaning}</p>
                        <p class="text-sm text-gray-300 mt-4">é€™å¼µç‰Œåæ˜ äº†ä½ ç›®å‰é¢å°é€™å€‹å•é¡Œæ™‚çš„å…§åœ¨ç‹€æ…‹å’Œå¿ƒç†æº–å‚™ã€‚</p>
                    </div>
                </div>
            `;
        }

        function proceedToDrawing() {
            document.getElementById('mindsetSection').classList.add('hidden');
            document.getElementById('drawSection').classList.remove('hidden');
            
            // é¡¯ç¤ºéœ€è¦æŠ½å–çš„ç‰Œæ•¸
            document.getElementById('cardsNeeded').textContent = spreads[currentSpread].cardCount;
            
            createCardDeck();
        }

        function createCardDeck() {
    const deck = document.getElementById('cardDeck');
    deck.innerHTML = '';

    // èˆ‡å¯¦éš›å¯æŠ½æ•¸åŒæ­¥ï¼ˆåŒ…å«å¿ƒæ…‹ç‰Œæ”¾å›å¾Œç‚º 78ï¼‰
    const totalCards = shuffledDeck.length;
    const fanAngle = 140; // æ‰‡å½¢ç¸½è§’åº¦å¢åŠ ä»¥å®¹ç´æ›´å¤šç‰Œ
    const angleStep = fanAngle / (totalCards - 1); // æ¯å¼µç‰Œä¹‹é–“çš„è§’åº¦
    const startAngle = -fanAngle / 2; // èµ·å§‹è§’åº¦ï¼ˆå¾å·¦é–‹å§‹ï¼‰
    const radius = 280; // å–®ä¸€åŠå¾‘

    // å–®å±¤æ‰‡å½¢æ’åˆ—
    for (let i = 0; i < totalCards; i++) {
        const card = document.createElement('div');
        card.className = 'fan-card card-back rounded-lg flex items-center justify-center text-lg';
        card.innerHTML = 'ğŸŒŸ';

        const angle = startAngle + (i * angleStep);
        const radian = (angle * Math.PI) / 180;

        const x = Math.sin(radian) * radius;
        const y = -Math.cos(radian) * radius * 0.4 + 150;
        card.style.transform = `translate(${x}px, ${y}px) rotate(${angle}deg)`;
        card.style.zIndex = 50 - Math.abs(i - Math.floor(totalCards / 2));

        const cardData = shuffledDeck[i];
        card.addEventListener('click', function () {
            drawCard(this, cardData);
        });

        deck.appendChild(card);
    }
}

        function drawCard(cardElement, selectedCard) {
    if (selectedCards.length >= spreads[currentSpread].cardCount) {
        return;
    }
    if (!selectedCard || !selectedCard.name) { console.warn('Invalid card picked:', selectedCard); return; }
    const isReversed = Math.random() < 0.5;
    drawnCards.push({
        ...selectedCard,
        reversed: isReversed,
        position: spreads[currentSpread].positions[selectedCards.length]
    });
    selectedCards.push(cardElement);
    // å¾ç‰Œå †ä¸­ç§»é™¤é¿å…é‡è¤‡
    const idx = shuffledDeck.indexOf(selectedCard);
    if (idx !== -1) shuffledDeck.splice(idx, 1);
    // è¦–è¦ºé¸ä¸­æ•ˆæœ
    cardElement.classList.add('selected');
    const remaining = spreads[currentSpread].cardCount - selectedCards.length;
    if (remaining > 0) {
        document.getElementById('cardsNeeded').textContent = remaining;
    } else {
        document.getElementById('cardsNeeded').textContent = 'å·²å®Œæˆ';
        document.getElementById('revealBtn').classList.remove('hidden');
    }
}

        function revealResults() {
            document.getElementById('drawSection').classList.add('hidden');
            document.getElementById('resultSection').classList.remove('hidden');
            
            document.getElementById('questionDisplay').textContent = `å•é¡Œï¼š${currentQuestion}`;
            document.getElementById('spreadName').textContent = `ç‰Œé™£ï¼š${spreads[currentSpread].name}`;
            
            displayResults();
        }

        function displayResults() {
            // é¡¯ç¤ºå¿ƒæ…‹ç‰Œçµæœ
            const mindsetContainer = document.getElementById('resultMindsetCard');
            const mindsetMeaning = mindsetCard.reversed ? mindsetCard.reversedMeaning : mindsetCard.meaning;
            const mindsetOrientation = mindsetCard.reversed ? "é€†ä½" : "æ­£ä½";
            
            mindsetContainer.innerHTML = `
                <div class="bg-gradient-to-r from-purple-900/30 to-pink-900/30 backdrop-blur-sm rounded-lg p-6 mb-6 border border-yellow-300/30">
                    <div class="flex items-center">
                        <div class="card-front w-24 h-36 rounded-lg flex flex-col items-center justify-center text-center mr-6 ${mindsetCard.reversed ? 'card-reversed' : ''} glow">
                            <div class="text-sm font-bold text-yellow-300">${mindsetCard.number}</div>
                            <div class="text-base font-semibold text-white">${mindsetCard.name}</div>
                            <div class="text-xs text-blue-200">${mindsetCard.suit}</div>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-yellow-300 mb-2">ğŸ’­ å¿ƒæ…‹ç‰Œ</h3>
                            <h4 class="text-lg font-medium text-white mb-2">${mindsetCard.name} (${mindsetOrientation})</h4>
                            <p class="text-blue-200">${mindsetMeaning}</p>
                        </div>
                    </div>
                    <div id="mindset-support-cards" class="mt-4"></div>
                </div>
            `;
            
            // é¡¯ç¤ºç‰Œé™£çµæœ
            const resultContainer = document.getElementById('resultCards');
            resultContainer.innerHTML = '';
            
            drawnCards.forEach((card, index) => {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-4';
                
                const meaning = card.reversed ? card.reversedMeaning : card.meaning;
                const orientation = card.reversed ? "é€†ä½" : "æ­£ä½";
                
                cardDiv.innerHTML = `
                    <div class="flex items-center mb-4">
                        <div class="card-front w-20 h-28 rounded-lg flex flex-col items-center justify-center text-center mr-4 ${card.reversed ? 'card-reversed' : ''}">
                            <div class="text-xs font-bold text-yellow-300">${card.number}</div>
                            <div class="text-sm font-semibold text-white">${card.name}</div>
                            <div class="text-xs text-blue-200">${card.suit}</div>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-yellow-300 mb-2">${card.position}</h3>
                            <h4 class="text-lg font-medium text-white mb-1">${card.name} (${orientation})</h4>
                            <p class="text-blue-200">${meaning}</p>
                        </div>
                    </div>
                    <div class="text-center mb-4">
                        <button onclick="drawSupportCard(${index})" class="bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 text-sm">
                            âœ¨ æŠ½å–è¼”åŠ©ç‰Œ (<span id="support-count-${index}">2</span>/2)
                        </button>
                    </div>
                    <div id="support-cards-${index}" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                `;
                
                resultContainer.appendChild(cardDiv);
            });
        }

        function drawSupportCard(position) {
            // æª¢æŸ¥æ˜¯å¦é‚„æœ‰å‰©é¤˜ç‰Œå¯æŠ½
            if (shuffledDeck.length === 0) {
                alert('æ²’æœ‰å‰©é¤˜çš„ç‰Œå¯ä»¥æŠ½å–äº†ï¼');
                return;
            }
            
            // åˆå§‹åŒ–ä½ç½®çš„è¼”åŠ©ç‰Œè¨˜éŒ„
            if (!supportCards[position]) {
                supportCards[position] = [];
                supportCardCounts[position] = 0;
            }
            
            // æª¢æŸ¥æ˜¯å¦å·²é”åˆ°ä¸Šé™
            if (supportCardCounts[position] >= 2) {
                alert('æ­¤ä½ç½®å·²é”åˆ°è¼”åŠ©ç‰Œä¸Šé™ï¼ˆ2å¼µï¼‰ï¼');
                return;
            }
            
            // å¾å‰©é¤˜ç‰Œçµ„ä¸­æŠ½å–ä¸€å¼µ
            const cardIndex = Math.floor(Math.random() * shuffledDeck.length);
            const supportCard = {
                ...shuffledDeck[cardIndex],
                reversed: Math.random() < 0.5
            };
            
            // å¾ç‰Œçµ„ä¸­ç§»é™¤å·²æŠ½å–çš„ç‰Œ
            shuffledDeck.splice(cardIndex, 1);
            
            // è¨˜éŒ„è¼”åŠ©ç‰Œ
            supportCards[position].push(supportCard);
            supportCardCounts[position]++;
            
            // é¡¯ç¤ºè¼”åŠ©ç‰Œ
            displaySupportCard(position, supportCard, supportCardCounts[position]);
            
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            updateSupportButton(position);
        }
        
        function displaySupportCard(position, card, cardNumber) {
            const meaning = card.reversed ? card.reversedMeaning : card.meaning;
            const orientation = card.reversed ? "é€†ä½" : "æ­£ä½";
            
            const cardHtml = `
                <div class="bg-gradient-to-r from-amber-900/20 to-yellow-900/20 backdrop-blur-sm rounded-lg p-4 border border-yellow-400/30">
                    <div class="flex items-center">
                        <div class="card-front w-16 h-24 rounded-lg flex flex-col items-center justify-center text-center mr-4 ${card.reversed ? 'card-reversed' : ''} glow">
                            <div class="text-xs font-bold text-yellow-300">${card.number}</div>
                            <div class="text-xs font-semibold text-white">${card.name}</div>
                            <div class="text-xs text-blue-200">${card.suit}</div>
                        </div>
                        <div class="flex-1">
                            <h4 class="text-lg font-semibold text-yellow-400 mb-1">è¼”åŠ©ç‰Œ ${cardNumber}</h4>
                            <h5 class="text-base font-medium text-white mb-1">${card.name} (${orientation})</h5>
                            <p class="text-blue-200 text-sm">${meaning}</p>
                        </div>
                    </div>
                </div>
            `;
            
            const containerId = position === 'mindset' ? 'mindset-support-cards' : `support-cards-${position}`;
            const container = document.getElementById(containerId);
            
            if (container) {
                container.insertAdjacentHTML('beforeend', cardHtml);
            }
        }
        
        function updateSupportButton(position) {
            const remaining = 2 - supportCardCounts[position];
            const countId = position === 'mindset' ? 'mindset-support-count' : `support-count-${position}`;
            const countElement = document.getElementById(countId);
            
            if (countElement) {
                countElement.textContent = remaining;
                
                // å¦‚æœå·²é”ä¸Šé™ï¼Œç¦ç”¨æŒ‰éˆ•
                if (remaining <= 0) {
                    const button = countElement.closest('button');
                    if (button) {
                        button.disabled = true;
                        button.classList.add('opacity-50', 'cursor-not-allowed');
                        button.innerHTML = 'âœ¨ è¼”åŠ©ç‰Œå·²æ»¿ (0/2)';
                    }
                }
            }
        }

        function startNewReading() {
            currentQuestion = "";
            currentSpread = "";
            selectedCards = [];
            drawnCards = [];
            shuffledDeck = [];
            mindsetCard = null;
            shuffleRemaining = 3;
            supportCards = {};
            supportCardCounts = {};
            
            document.getElementById('questionInput').value = "";
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('shuffleSection').classList.add('hidden');
            document.getElementById('mindsetSection').classList.add('hidden');
            document.getElementById('drawSection').classList.add('hidden');
            document.getElementById('spreadSection').classList.add('hidden');
            document.getElementById('questionSection').classList.remove('hidden');
        }
    </script>

<!-- RWS face card support (added by assistant v2) -->
<style id="rws-card-style">
  .rws-card-frame{position:relative;display:inline-flex;align-items:center;justify-content:center}
  .rws-img{width:8rem;height:auto;border-radius:.5rem;box-shadow:0 8px 24px rgba(0,0,0,.3)}
  .rws-img.sm{width:4rem}.rws-img.md{width:6rem}.rws-img.lg{width:8rem}.rws-img.xl{width:12rem}
  .rws-reversed{transform:rotate(180deg)}
  .rws-fallback{display:none;width:8rem;height:12rem;border-radius:.5rem;background:linear-gradient(135deg,rgba(253,224,71,.12),rgba(59,130,246,.12));border:1px solid rgba(253,224,71,.25);padding:.5rem;text-align:center;justify-content:center;align-items:center;flex-direction:column}
  .rws-card-frame.no-img .rws-fallback{display:flex}
</style>
<script>
(function(){
  function findIndexByCard(card){
    try{
      if (typeof tarotCards === 'undefined' || !Array.isArray(tarotCards)) return -1;
      let idx = tarotCards.findIndex(c=>c.name===card.name && c.number===card.number && c.suit===card.suit);
      if (idx >= 0) return idx;
      idx = tarotCards.findIndex(c=>c.name===card.name);
      return idx;
    }catch(e){ return -1; }
  }
  function getCardImagePath(card){
    const idx = findIndexByCard(card);
    if (idx < 0) return 'assets/cards/__missing__.jpg';
    const n = String(idx).padStart(2,'0');
    return `assets/cards/${n}.jpg`;
  }
  function imageOrFallbackHTML(card,sizeClass){
    const reversed = card.reversed ? 'rws-reversed' : '';
    const src = getCardImagePath(card);
    const safeName = (card.name||'') + (card.reversed?'ï¼ˆé€†ä½ï¼‰':'ï¼ˆæ­£ä½ï¼‰');
    return `<div class="rws-card-frame">
      <img class="rws-img ${sizeClass||'lg'} ${reversed}" src="${src}" alt="${safeName}" onerror="this.closest('.rws-card-frame').classList.add('no-img')"/>
      <div class="rws-fallback ${reversed}"><div class="text-xs font-bold text-yellow-300">${card.number||''}</div><div class="text-base font-semibold text-white">${card.name||''}</div><div class="text-xs text-blue-200">${card.suit||''}</div></div>
    </div>`;
  }
  window.displayMindsetCard = function(){
    const el = document.getElementById('mindsetCard');
    const meaning = mindsetCard.reversed ? mindsetCard.reversedMeaning : mindsetCard.meaning;
    const ori = mindsetCard.reversed ? 'é€†ä½' : 'æ­£ä½';
    el.innerHTML = `<div class="flex items-center justify-center gap-6">
      ${imageOrFallbackHTML(mindsetCard,'xl')}
      <div class="flex-1 textå·¦">
        <h3 class="text-2xl font-semibold text-yellow-300 mb-2">ğŸ’­ å¿ƒæ…‹ç‰Œ</h3>
        <h4 class="text-xl font-medium text-white mb-2">${mindsetCard.name} (${ori})</h4>
        <p class="text-blue-200 text-lg leading-relaxed">${meaning}</p>
        <p class="text-sm text-gray-300 mt-4">é€™å¼µç‰Œåæ˜ äº†ä½ ç›®å‰é¢å°é€™å€‹å•é¡Œæ™‚çš„å…§åœ¨ç‹€æ…‹å’Œå¿ƒç†æº–å‚™ã€‚</p>
      </div></div>`;
  };
  window.displaySupportCard = function(position,card,cardNumber){
    const meaning = card.reversed ? card.reversedMeaning : card.meaning;
    const ori = card.reversed ? 'é€†ä½' : 'æ­£ä½';
    const html = `<div class="bg-gradient-to-r from-amber-900/20 to-yellow-900/10 backdrop-blur-sm rounded-lg p-4 border border-yellow-400/30">
      <div class="flex items-center gap-4">
        ${imageOrFallbackHTML(card,'md')}
        <div class="flex-1"><h4 class="text-lg font-semibold text-yellow-400 mb-1">è¼”åŠ©ç‰Œ ${cardNumber}</h4>
        <h5 class="text-base font-medium text-white mb-1">${card.name} (${ori})</h5>
        <p class="text-blue-200 text-sm">${meaning}</p></div></div></div>`;
    const containerId = position==='mindset' ? 'mindset-support-cards' : `support-cards-${position}`;
    const c = document.getElementById(containerId);
    if (c) c.insertAdjacentHTML('beforeend', html);
  };
  window.displayResults = function(){
    const mc = document.getElementById('resultMindsetCard');
    const mm = mindsetCard.reversed ? mindsetCard.reversedMeaning : mindsetCard.meaning;
    const mo = mindsetCard.reversed ? 'é€†ä½' : 'æ­£ä½';
    mc.innerHTML = `<div class="bg-gradient-to-r from-purple-900/30 to-blue-900/10 backdrop-blur-sm rounded-lg p-6 mb-6 border border-yellow-300/30">
      <div class="flex items-center gap-6">${imageOrFallbackHTML(mindsetCard,'lg')}
      <div class="flex-1"><h3 class="text-xl font-semibold text-yellow-300 mb-2">ğŸ’­ å¿ƒæ…‹ç‰Œ</h3>
      <h4 class="text-lg font-medium textç™½ mb-1">${mindsetCard.name} (${mo})</h4>
      <p class="text-blue-200">${mm}</p><div id="mindset-support-cards" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div></div></div></div>`;
    const rc = document.getElementById('resultCards'); rc.innerHTML='';
    const positions = Object.keys(drawnCards);
    positions.forEach((position,index)=>{
      const card = drawnCards[position];
      const meaning = card.reversed ? card.reversedMeaning : card.meaning;
      const ori = card.reversed ? 'é€†ä½' : 'æ­£ä½';
      const div = document.createElement('div');
      div.className = "bg-gradient-to-r from-blue-900/20 to-indigo-900/10 backdrop-blur-sm rounded-lg p-4 md:p-6 border border-blue-400/20";
      div.innerHTML = `<div class="flex items-center gap-5">
        ${imageOrFallbackHTML(card,'lg')}
        <div class="flex-1"><h3 class="text-lg font-semibold text-blue-300 mb-1">${index+1}. ${spreads[currentSpread].positions[index]}</h3>
        <h4 class="text-lg font-medium text-white mb-1">${card.name} (${ori})</h4>
        <p class="text-blue-200">${meaning}</p></div></div>
        <div class="text-center mt-3">
          <button onclick="drawSupportCard(${index})" class="bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-200 font-semibold py-2 px-4 rounded-lg transition-all duration-300 text-sm">
            âœ¨ æŠ½å–è¼”åŠ©ç‰Œ (<span id="support-count-${index}">2</span>/2)
          </button></div>
        <div id="support-cards-${index}" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div>`;
      rc.appendChild(div);
    });
  };
})();</script>

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./service-worker.js').catch(console.error);
    });
  }
</script>
<!-- dev:offline-test --><a href="offline.html" style="display:none">offline</a>
</body>
</html>
